Cookbook Name:: maven_centos
# Recipe:: default
#
# Copyright 2016, YOUR_COMPANY_NAME
#
# All rights reserved - Do Not Redistribute
#


package  'java-1.7.0-openjdk'do
  action :install

end

ark "apache-maven" do 
url 'http://mirror.olnevhost.net/pub/apache/maven/binaries/apache-maven-3.2.1-bin.tar.gz'
path '/opt'
version '3.2.1'
action :install
end

execute 'move file' do
  cwd '/opt'
 command ' sudo mv apache-maven-3.2.1/ /opt/maven'
not_if do FileTest.directory?/opt/maven end
end

execute 'maven/bin' do
 command 'sudo ln -s /opt/maven/bin/mvn /usr/bin/mvn'
 not_if do ::File.exists?('/usr/bin/mvn') end
 end
 
 template '/etc/profile.d/maven.sh' do
 source 'maven.sh.erb'
 owner 'root'
 group 'root'
 mode  '0777'
end

execute 'echo' do
cwd '/opt'
command 'sh -c echo "MVN_HOME=/opt/mvn" >> /etc/profile.d/maven.sh'
end